<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>notebookdata_collection_ap__wczxq – 007 AI Financial Advisor</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../images/bee.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-a2cefe63c5e1a49360bb8f894bbdff18.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": true,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "Search",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../images/IBMlogo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">007 AI Financial Advisor</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/ibm-client-engineering/solution-007-AI-Financial-Advisor"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-bi-linkedin" role="link" data-bs-toggle="dropdown" aria-expanded="false">
      <i class="bi bi-linkedin" role="img">
</i> 
 <span class="menu-text"></span>
    </a>
    <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="nav-menu-bi-linkedin">    
        <li>
    <a class="dropdown-item" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https://ibm-client-engineering.github.io/solution-007-AI-Financial-Advisor/&amp;title=007%20AI%20Financial%20Advisor&amp;summary=Check%20out%20this%20guide%20on%20building%20a%20007%20agent%20for%20financial%20advisors%20using%20multiple%20large%20language%20models%20and%20custom%20automations%20including%20report%20generation%20and%20email%20automation.&amp;source=IBM">
 <span class="dropdown-text">Share on your LinkedIn</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="https://www.linkedin.com/company/cs-tech-expert-labs">
 <span class="dropdown-text">IBM LinkedIn</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar zindex-bottom">
        
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<div id="a3812ed9" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yfinance <span class="im">as</span> yf</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_data(tickers, start_date, end_date):</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Fetch historical price data and sector/industry classification for a list of tickers.</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co">    Parameters:</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co">        tickers (list): List of stock tickers.</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co">        start_date (str): Start date in 'YYYY-MM-DD' format.</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co">        end_date (str): End date in 'YYYY-MM-DD' format.</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co">    Returns:</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="co">        tuple:</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="co">            - historical_prices (pd.DataFrame): Historical price data for all tickers.</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="co">            - sector_data (pd.DataFrame): Sector and industry classification for all tickers.</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    historical_prices <span class="op">=</span> pd.DataFrame()</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ticker <span class="kw">in</span> tickers:</span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"Fetching data for </span><span class="sc">{</span>ticker<span class="sc">}</span><span class="ss">..."</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a>            stock <span class="op">=</span> yf.Ticker(ticker)</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Fetch historical price data</span></span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>            history <span class="op">=</span> stock.history(start<span class="op">=</span>start_date, end<span class="op">=</span>end_date)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a>            history[<span class="st">'Ticker'</span>] <span class="op">=</span> ticker</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a>            historical_prices <span class="op">=</span> pd.concat([historical_prices, history])</span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"Error fetching data for </span><span class="sc">{</span>ticker<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> historical_prices</span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-39"><a href="#cb1-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-40"><a href="#cb1-40" aria-hidden="true" tabindex="-1"></a><span class="co"># Full ticker list</span></span>
<span id="cb1-41"><a href="#cb1-41" aria-hidden="true" tabindex="-1"></a>tickers <span class="op">=</span> [</span>
<span id="cb1-42"><a href="#cb1-42" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AAPL"</span>, <span class="st">"MSFT"</span>, <span class="st">"GOOGL"</span>, <span class="st">"NVDA"</span>, <span class="st">"META"</span>, <span class="st">"AMD"</span>, <span class="st">"CRM"</span>, <span class="st">"ORCL"</span>, <span class="st">"ADBE"</span>, <span class="st">"INTC"</span>, <span class="st">"TSLA"</span>, <span class="st">"XOM"</span>, <span class="st">"CVX"</span>, <span class="st">"ENPH"</span>, <span class="st">"FSLR"</span>, <span class="st">"NEE"</span>, <span class="st">"RUN"</span>, <span class="st">"SEDG"</span>, <span class="st">"BP"</span>, <span class="st">"SLB"</span>, <span class="st">"COP"</span>, <span class="st">"EOG"</span>, <span class="st">"JPM"</span>, <span class="st">"BAC"</span>, <span class="st">"GS"</span>, <span class="st">"WFC"</span>, <span class="st">"MS"</span>, <span class="st">"BLK"</span>, <span class="st">"JNJ"</span>, <span class="st">"PFE"</span>, <span class="st">"MRK"</span>, <span class="st">"ABBV"</span>, <span class="st">"AMGN"</span>, <span class="st">"UNH"</span>, <span class="st">"DIS"</span>, <span class="st">"HD"</span>, <span class="st">"AMZN"</span>, <span class="st">"NKE"</span>, <span class="st">"MCD"</span>, <span class="st">"SBUX"</span>, <span class="st">"BA"</span>, <span class="st">"CAT"</span>, <span class="st">"GE"</span>, <span class="st">"DE"</span>, <span class="st">"MMM"</span>, <span class="st">"PG"</span>, <span class="st">"KO"</span>, <span class="st">"PEP"</span>, <span class="st">"WMT"</span>, <span class="st">"COST"</span>, <span class="st">"AMT"</span>, <span class="st">"PLD"</span>, <span class="st">"SPG"</span>, <span class="st">"O"</span>, <span class="st">"DUK"</span>, <span class="st">"SO"</span>, <span class="st">"AWK"</span>, <span class="st">"GOOG"</span>, <span class="st">"NFLX"</span>, <span class="st">"T"</span>, <span class="st">"NEM"</span>, <span class="st">"BHP"</span>, <span class="st">"RIO"</span>, <span class="st">"LIN"</span>, <span class="st">"SPY"</span>, <span class="st">"QQQ"</span>, <span class="st">"DIA"</span>, <span class="st">"IVV"</span>, <span class="st">"VTI"</span>, <span class="st">"ARKK"</span>, <span class="st">"VOO"</span>, <span class="st">"XLK"</span>, <span class="st">"XLE"</span>, <span class="st">"IHI"</span>, <span class="st">"IYR"</span></span>
<span id="cb1-43"><a href="#cb1-43" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb1-44"><a href="#cb1-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-45"><a href="#cb1-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Define date range</span></span>
<span id="cb1-46"><a href="#cb1-46" aria-hidden="true" tabindex="-1"></a>start_date <span class="op">=</span> <span class="st">"2023-01-01"</span></span>
<span id="cb1-47"><a href="#cb1-47" aria-hidden="true" tabindex="-1"></a>end_date <span class="op">=</span> datetime.today().strftime(<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>)</span>
<span id="cb1-48"><a href="#cb1-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-49"><a href="#cb1-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Fetch data</span></span>
<span id="cb1-50"><a href="#cb1-50" aria-hidden="true" tabindex="-1"></a>historical_prices <span class="op">=</span> fetch_data(tickers, start_date, end_date)</span>
<span id="cb1-51"><a href="#cb1-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-52"><a href="#cb1-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-53"><a href="#cb1-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Display summary</span></span>
<span id="cb1-54"><a href="#cb1-54" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"</span><span class="ch">\n</span><span class="st">Historical Prices (Sample):"</span>)</span>
<span id="cb1-55"><a href="#cb1-55" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(historical_prices.head())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Fetching data for AAPL...
Fetching data for MSFT...
Fetching data for GOOGL...
Fetching data for NVDA...
Fetching data for META...
Fetching data for AMD...
Fetching data for CRM...
Fetching data for ORCL...
Fetching data for ADBE...
Fetching data for INTC...
Fetching data for TSLA...
Fetching data for XOM...
Fetching data for CVX...
Fetching data for ENPH...
Fetching data for FSLR...
Fetching data for NEE...
Fetching data for RUN...
Fetching data for SEDG...
Fetching data for BP...
Fetching data for SLB...
Fetching data for COP...
Fetching data for EOG...
Fetching data for JPM...
Fetching data for BAC...
Fetching data for GS...
Fetching data for WFC...
Fetching data for MS...
Fetching data for BLK...
Fetching data for JNJ...
Fetching data for PFE...
Fetching data for MRK...
Fetching data for ABBV...
Fetching data for AMGN...
Fetching data for UNH...
Fetching data for DIS...
Fetching data for HD...
Fetching data for AMZN...
Fetching data for NKE...
Fetching data for MCD...
Fetching data for SBUX...
Fetching data for BA...
Fetching data for CAT...
Fetching data for GE...
Fetching data for DE...
Fetching data for MMM...
Fetching data for PG...
Fetching data for KO...
Fetching data for PEP...
Fetching data for WMT...
Fetching data for COST...
Fetching data for AMT...
Fetching data for PLD...
Fetching data for SPG...
Fetching data for O...
Fetching data for DUK...
Fetching data for SO...
Fetching data for AWK...
Fetching data for GOOG...
Fetching data for NFLX...
Fetching data for T...
Fetching data for NEM...
Fetching data for BHP...
Fetching data for RIO...
Fetching data for LIN...
Fetching data for SPY...
Fetching data for QQQ...
Fetching data for DIA...
Fetching data for IVV...
Fetching data for VTI...
Fetching data for ARKK...
Fetching data for VOO...
Fetching data for XLK...
Fetching data for XLE...
Fetching data for IHI...
Fetching data for IYR...

Historical Prices (Sample):
                                 Open        High         Low       Close  \
Date                                                                        
2023-01-03 00:00:00-05:00  128.924237  129.537780  122.877820  123.768456   
2023-01-04 00:00:00-05:00  125.569520  127.321104  123.778358  125.045036   
2023-01-05 00:00:00-05:00  125.807014  126.440353  123.461682  123.718971   
2023-01-06 00:00:00-05:00  124.698677  128.934129  123.590330  128.271103   
2023-01-09 00:00:00-05:00  129.112255  132.021662  128.538289  128.795578   

                              Volume  Dividends  Stock Splits Ticker  \
Date                                                                   
2023-01-03 00:00:00-05:00  112117500        0.0           0.0   AAPL   
2023-01-04 00:00:00-05:00   89113600        0.0           0.0   AAPL   
2023-01-05 00:00:00-05:00   80962700        0.0           0.0   AAPL   
2023-01-06 00:00:00-05:00   87754700        0.0           0.0   AAPL   
2023-01-09 00:00:00-05:00   70790800        0.0           0.0   AAPL   

                           Capital Gains  
Date                                      
2023-01-03 00:00:00-05:00            NaN  
2023-01-04 00:00:00-05:00            NaN  
2023-01-05 00:00:00-05:00            NaN  
2023-01-06 00:00:00-05:00            NaN  
2023-01-09 00:00:00-05:00            NaN  </code></pre>
</div>
</div>
<div id="32283f1a" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>historical_price</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="18">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Open</th>
<th data-quarto-table-cell-role="th">High</th>
<th data-quarto-table-cell-role="th">Low</th>
<th data-quarto-table-cell-role="th">Close</th>
<th data-quarto-table-cell-role="th">Volume</th>
<th data-quarto-table-cell-role="th">Dividends</th>
<th data-quarto-table-cell-role="th">Stock Splits</th>
<th data-quarto-table-cell-role="th">Ticker</th>
<th data-quarto-table-cell-role="th">Capital Gains</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Date</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-01-03 00:00:00-05:00</td>
<td>128.924245</td>
<td>129.537788</td>
<td>122.877827</td>
<td>123.768463</td>
<td>112117500</td>
<td>0.0</td>
<td>0.0</td>
<td>AAPL</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-01-04 00:00:00-05:00</td>
<td>125.569527</td>
<td>127.321112</td>
<td>123.778365</td>
<td>125.045044</td>
<td>89113600</td>
<td>0.0</td>
<td>0.0</td>
<td>AAPL</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-01-05 00:00:00-05:00</td>
<td>125.807022</td>
<td>126.440361</td>
<td>123.461690</td>
<td>123.718979</td>
<td>80962700</td>
<td>0.0</td>
<td>0.0</td>
<td>AAPL</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2023-01-06 00:00:00-05:00</td>
<td>124.698692</td>
<td>128.934144</td>
<td>123.590345</td>
<td>128.271118</td>
<td>87754700</td>
<td>0.0</td>
<td>0.0</td>
<td>AAPL</td>
<td>NaN</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2023-01-09 00:00:00-05:00</td>
<td>129.112286</td>
<td>132.021694</td>
<td>128.538320</td>
<td>128.795609</td>
<td>70790800</td>
<td>0.0</td>
<td>0.0</td>
<td>AAPL</td>
<td>NaN</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-11-13 00:00:00-05:00</td>
<td>99.010002</td>
<td>99.410004</td>
<td>98.430000</td>
<td>98.559998</td>
<td>4801500</td>
<td>0.0</td>
<td>0.0</td>
<td>IYR</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2024-11-14 00:00:00-05:00</td>
<td>98.540001</td>
<td>98.540001</td>
<td>97.559998</td>
<td>97.690002</td>
<td>6714800</td>
<td>0.0</td>
<td>0.0</td>
<td>IYR</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-11-15 00:00:00-05:00</td>
<td>97.260002</td>
<td>97.989998</td>
<td>96.959999</td>
<td>97.800003</td>
<td>6786300</td>
<td>0.0</td>
<td>0.0</td>
<td>IYR</td>
<td>0.0</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2024-11-18 00:00:00-05:00</td>
<td>97.389999</td>
<td>98.620003</td>
<td>97.180000</td>
<td>98.599998</td>
<td>4726100</td>
<td>0.0</td>
<td>0.0</td>
<td>IYR</td>
<td>0.0</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024-11-19 00:00:00-05:00</td>
<td>98.300003</td>
<td>99.320000</td>
<td>97.889999</td>
<td>99.120003</td>
<td>5340800</td>
<td>0.0</td>
<td>0.0</td>
<td>IYR</td>
<td>0.0</td>
</tr>
</tbody>
</table>

<p>35550 rows × 9 columns</p>
</div>
</div>
</div>
<div id="6ab6a43f" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>historical_prices.to_csv(<span class="st">"/Users/nitikabhatia/Downloads/latest_historical_prices.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="ff080202" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="op">!</span>pip install yahooquery</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Collecting yahooquery
  Obtaining dependency information for yahooquery from https://files.pythonhosted.org/packages/d1/a9/9a06f31cc068c7997b63a358f94ed433afb28599ef63bdcd5333db4a19d8/yahooquery-2.3.7-py3-none-any.whl.metadata
  Downloading yahooquery-2.3.7-py3-none-any.whl.metadata (5.0 kB)
Requirement already satisfied: beautifulsoup4&lt;5.0.0,&gt;=4.12.2 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from yahooquery) (4.12.2)
Requirement already satisfied: lxml&lt;5.0.0,&gt;=4.9.3 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from yahooquery) (4.9.3)
Requirement already satisfied: pandas&lt;3.0.0,&gt;=2.0.3 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from yahooquery) (2.1.4)
Requirement already satisfied: requests&lt;3.0.0,&gt;=2.31.0 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from yahooquery) (2.31.0)
Collecting requests-futures&lt;2.0.0,&gt;=1.0.1 (from yahooquery)
  Obtaining dependency information for requests-futures&lt;2.0.0,&gt;=1.0.1 from https://files.pythonhosted.org/packages/91/23/7c1096731c15c83826cb0dd42078b561a838aed44c36f370aeb815168106/requests_futures-1.0.2-py2.py3-none-any.whl.metadata
  Downloading requests_futures-1.0.2-py2.py3-none-any.whl.metadata (12 kB)
Requirement already satisfied: tqdm&lt;5.0.0,&gt;=4.65.0 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from yahooquery) (4.65.0)
Requirement already satisfied: soupsieve&gt;1.2 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from beautifulsoup4&lt;5.0.0,&gt;=4.12.2-&gt;yahooquery) (2.4)
Requirement already satisfied: numpy&lt;2,&gt;=1.23.2 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from pandas&lt;3.0.0,&gt;=2.0.3-&gt;yahooquery) (1.24.3)
Requirement already satisfied: python-dateutil&gt;=2.8.2 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from pandas&lt;3.0.0,&gt;=2.0.3-&gt;yahooquery) (2.8.2)
Requirement already satisfied: pytz&gt;=2020.1 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from pandas&lt;3.0.0,&gt;=2.0.3-&gt;yahooquery) (2023.3.post1)
Requirement already satisfied: tzdata&gt;=2022.1 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from pandas&lt;3.0.0,&gt;=2.0.3-&gt;yahooquery) (2023.3)
Requirement already satisfied: charset-normalizer&lt;4,&gt;=2 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from requests&lt;3.0.0,&gt;=2.31.0-&gt;yahooquery) (2.0.4)
Requirement already satisfied: idna&lt;4,&gt;=2.5 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from requests&lt;3.0.0,&gt;=2.31.0-&gt;yahooquery) (3.4)
Requirement already satisfied: urllib3&lt;3,&gt;=1.21.1 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from requests&lt;3.0.0,&gt;=2.31.0-&gt;yahooquery) (1.26.18)
Requirement already satisfied: certifi&gt;=2017.4.17 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from requests&lt;3.0.0,&gt;=2.31.0-&gt;yahooquery) (2024.6.2)
Requirement already satisfied: six&gt;=1.5 in /Users/nitikabhatia/anaconda3/lib/python3.11/site-packages (from python-dateutil&gt;=2.8.2-&gt;pandas&lt;3.0.0,&gt;=2.0.3-&gt;yahooquery) (1.16.0)
Downloading yahooquery-2.3.7-py3-none-any.whl (52 kB)
   ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ 52.7/52.7 kB 7.0 MB/s eta 0:00:00
Downloading requests_futures-1.0.2-py2.py3-none-any.whl (7.7 kB)
Installing collected packages: requests-futures, yahooquery
Successfully installed requests-futures-1.0.2 yahooquery-2.3.7</code></pre>
</div>
</div>
<div id="a024c11c" class="cell" data-execution_count="62">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> yfinance <span class="im">as</span> yf</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> datetime</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fetch_stock_data_with_ytd(stock_tickers):</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">"""</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="co">    Fetch enhanced stock data with calculated YTD Return.</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co">    """</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    stock_data <span class="op">=</span> []</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    current_year <span class="op">=</span> datetime.now().year</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> ticker <span class="kw">in</span> stock_tickers:</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">try</span>:</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>            stock <span class="op">=</span> yf.Ticker(ticker)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>            info <span class="op">=</span> stock.info</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Retrieve historical data to calculate YTD return</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>            hist <span class="op">=</span> stock.history(start<span class="op">=</span><span class="ss">f"</span><span class="sc">{</span>current_year<span class="sc">}</span><span class="ss">-01-01"</span>, end<span class="op">=</span>datetime.now().strftime(<span class="st">'%Y-%m-</span><span class="sc">%d</span><span class="st">'</span>))</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="kw">not</span> hist.empty:</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>                jan_1_price <span class="op">=</span> hist.iloc[<span class="dv">0</span>][<span class="st">"Close"</span>]</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                current_price <span class="op">=</span> hist.iloc[<span class="op">-</span><span class="dv">1</span>][<span class="st">"Close"</span>]</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                ytd_return <span class="op">=</span> ((current_price <span class="op">-</span> jan_1_price) <span class="op">/</span> jan_1_price) <span class="op">*</span> <span class="dv">100</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span>:</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>                ytd_return <span class="op">=</span> <span class="st">"N/A"</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>            <span class="co"># Extract key metrics</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>            stock_details <span class="op">=</span> {</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Ticker"</span>: ticker,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Sector"</span>: info.get(<span class="st">"sector"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Beta"</span>: info.get(<span class="st">"beta"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Dividend Yield (%)"</span>: info.get(<span class="st">"dividendYield"</span>, <span class="st">"N/A"</span>) <span class="op">*</span> <span class="dv">100</span> <span class="cf">if</span> info.get(<span class="st">"dividendYield"</span>) <span class="cf">else</span> <span class="st">"N/A"</span>,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Growth Rate"</span>: info.get(<span class="st">"earningsGrowth"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>                <span class="st">"EPS"</span>: info.get(<span class="st">"trailingEps"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>                <span class="st">"P/E Ratio"</span>: info.get(<span class="st">"trailingPE"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>                <span class="st">"P/B Ratio"</span>: info.get(<span class="st">"priceToBook"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Market Cap (B)"</span>: info.get(<span class="st">"marketCap"</span>, <span class="dv">0</span>) <span class="op">/</span> <span class="fl">1e9</span>,</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>                <span class="st">"Volume"</span>: info.get(<span class="st">"volume"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>                <span class="st">"52-Week High"</span>: info.get(<span class="st">"fiftyTwoWeekHigh"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>                <span class="st">"52-Week Low"</span>: info.get(<span class="st">"fiftyTwoWeekLow"</span>, <span class="st">"N/A"</span>),</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>                <span class="st">"YTD Return (%)"</span>: ytd_return,</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>            }</span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>            stock_data.append(stock_details)</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">except</span> <span class="pp">Exception</span> <span class="im">as</span> e:</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>            <span class="bu">print</span>(<span class="ss">f"Error fetching data for </span><span class="sc">{</span>ticker<span class="sc">}</span><span class="ss">: </span><span class="sc">{</span>e<span class="sc">}</span><span class="ss">"</span>)</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pd.DataFrame(stock_data)</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>stock_tickers <span class="op">=</span> [</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="st">"AAPL"</span>, <span class="st">"MSFT"</span>, <span class="st">"GOOGL"</span>, <span class="st">"NVDA"</span>, <span class="st">"META"</span>, <span class="st">"AMD"</span>, <span class="st">"CRM"</span>, <span class="st">"ORCL"</span>, <span class="st">"ADBE"</span>, <span class="st">"INTC"</span>, <span class="st">"TSLA"</span>, <span class="st">"XOM"</span>, <span class="st">"CVX"</span>, <span class="st">"ENPH"</span>, <span class="st">"FSLR"</span>, <span class="st">"NEE"</span>, <span class="st">"RUN"</span>, <span class="st">"SEDG"</span>, <span class="st">"BP"</span>, <span class="st">"SLB"</span>, <span class="st">"COP"</span>, <span class="st">"EOG"</span>, <span class="st">"JPM"</span>, <span class="st">"BAC"</span>, <span class="st">"GS"</span>, <span class="st">"WFC"</span>, <span class="st">"MS"</span>, <span class="st">"BLK"</span>, <span class="st">"JNJ"</span>, <span class="st">"PFE"</span>, <span class="st">"MRK"</span>, <span class="st">"ABBV"</span>, <span class="st">"AMGN"</span>, <span class="st">"UNH"</span>, <span class="st">"DIS"</span>, <span class="st">"HD"</span>, <span class="st">"AMZN"</span>, <span class="st">"NKE"</span>, <span class="st">"MCD"</span>, <span class="st">"SBUX"</span>, <span class="st">"BA"</span>, <span class="st">"CAT"</span>, <span class="st">"GE"</span>, <span class="st">"DE"</span>, <span class="st">"MMM"</span>, <span class="st">"PG"</span>, <span class="st">"KO"</span>, <span class="st">"PEP"</span>, <span class="st">"WMT"</span>, <span class="st">"COST"</span>, <span class="st">"AMT"</span>, <span class="st">"PLD"</span>, <span class="st">"SPG"</span>, <span class="st">"O"</span>, <span class="st">"DUK"</span>, <span class="st">"SO"</span>, <span class="st">"AWK"</span>, <span class="st">"GOOG"</span>, <span class="st">"NFLX"</span>, <span class="st">"T"</span>, <span class="st">"NEM"</span>, <span class="st">"BHP"</span>, <span class="st">"RIO"</span>, <span class="st">"LIN"</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>stock_data <span class="op">=</span> fetch_stock_data_with_ytd(stock_tickers)</span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the fetched stock data</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(stock_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Ticker                  Sector   Beta Dividend Yield (%) Growth Rate  \
0    AAPL              Technology  1.240               0.44      -0.341   
1    MSFT              Technology  0.904               0.79       0.104   
2   GOOGL  Communication Services  1.034               0.45       0.366   
3    NVDA              Technology  1.657               0.03        1.68   
4    META  Communication Services  1.215               0.36       0.374   
..    ...                     ...    ...                ...         ...   
59      T  Communication Services  0.730               4.88         N/A   
60    NEM         Basic Materials  0.531               2.32       3.039   
61    BHP         Basic Materials  0.859               5.59       0.077   
62    RIO         Basic Materials  0.617               6.97       0.133   
63    LIN         Basic Materials  0.949               1.25       0.009   

      EPS  P/E Ratio  P/B Ratio  Market Cap (B)     Volume  52-Week High  \
0    6.09  37.602627   60.79108     3461.518197   30174153        237.49   
1   12.12  34.281353  10.738117     3089.118265   18442663        468.35   
2    7.44  23.653225   6.870729     2188.452037   18962205        191.75   
3    2.12   68.81604   61.60895     3606.152741  260171855        149.77   
4   21.38  26.450891   8.675483     1416.463647    9566484        602.95   
..    ...        ...        ...             ...        ...           ...   
59   1.24   18.41129   1.600308      163.811869   13924052         23.20   
60  -2.18        N/A   1.655244       49.158210    6408011         58.72   
61   3.11  16.807076   5.914234      132.929937    1811485         69.11   
62   6.59   9.467375   1.832305       99.642450    1206041         75.09   
63  13.37  33.667915   5.471563      214.337782    1828508        487.49   

    52-Week Low  YTD Return (%)  
0        164.08       23.571612  
1        362.90       13.267011  
2        127.90       29.232873  
3         45.01      205.268110  
4        313.66       62.516795  
..          ...             ...  
59        15.94       39.927917  
60        29.42        7.541056  
61        50.90      -18.216277  
62        59.35       -9.906014  
63       396.07        9.408891  

[64 rows x 13 columns]</code></pre>
</div>
</div>
<div id="dcd775cc" class="cell" data-execution_count="63">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>stock_data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="63">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Ticker</th>
<th data-quarto-table-cell-role="th">Sector</th>
<th data-quarto-table-cell-role="th">Beta</th>
<th data-quarto-table-cell-role="th">Dividend Yield (%)</th>
<th data-quarto-table-cell-role="th">Growth Rate</th>
<th data-quarto-table-cell-role="th">EPS</th>
<th data-quarto-table-cell-role="th">P/E Ratio</th>
<th data-quarto-table-cell-role="th">P/B Ratio</th>
<th data-quarto-table-cell-role="th">Market Cap (B)</th>
<th data-quarto-table-cell-role="th">Volume</th>
<th data-quarto-table-cell-role="th">52-Week High</th>
<th data-quarto-table-cell-role="th">52-Week Low</th>
<th data-quarto-table-cell-role="th">YTD Return (%)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>AAPL</td>
<td>Technology</td>
<td>1.240</td>
<td>0.44</td>
<td>-0.341</td>
<td>6.09</td>
<td>37.602627</td>
<td>60.79108</td>
<td>3461.518197</td>
<td>30174153</td>
<td>237.49</td>
<td>164.08</td>
<td>23.571612</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>MSFT</td>
<td>Technology</td>
<td>0.904</td>
<td>0.79</td>
<td>0.104</td>
<td>12.12</td>
<td>34.281353</td>
<td>10.738117</td>
<td>3089.118265</td>
<td>18442663</td>
<td>468.35</td>
<td>362.90</td>
<td>13.267011</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>GOOGL</td>
<td>Communication Services</td>
<td>1.034</td>
<td>0.45</td>
<td>0.366</td>
<td>7.44</td>
<td>23.653225</td>
<td>6.870729</td>
<td>2188.452037</td>
<td>18962205</td>
<td>191.75</td>
<td>127.90</td>
<td>29.232873</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>NVDA</td>
<td>Technology</td>
<td>1.657</td>
<td>0.03</td>
<td>1.68</td>
<td>2.12</td>
<td>68.81604</td>
<td>61.60895</td>
<td>3606.152741</td>
<td>260171855</td>
<td>149.77</td>
<td>45.01</td>
<td>205.268110</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>META</td>
<td>Communication Services</td>
<td>1.215</td>
<td>0.36</td>
<td>0.374</td>
<td>21.38</td>
<td>26.450891</td>
<td>8.675483</td>
<td>1416.463647</td>
<td>9566484</td>
<td>602.95</td>
<td>313.66</td>
<td>62.516795</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">59</td>
<td>T</td>
<td>Communication Services</td>
<td>0.730</td>
<td>4.88</td>
<td>N/A</td>
<td>1.24</td>
<td>18.41129</td>
<td>1.600308</td>
<td>163.811869</td>
<td>13924052</td>
<td>23.20</td>
<td>15.94</td>
<td>39.927917</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">60</td>
<td>NEM</td>
<td>Basic Materials</td>
<td>0.531</td>
<td>2.32</td>
<td>3.039</td>
<td>-2.18</td>
<td>N/A</td>
<td>1.655244</td>
<td>49.158210</td>
<td>6408011</td>
<td>58.72</td>
<td>29.42</td>
<td>7.541056</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">61</td>
<td>BHP</td>
<td>Basic Materials</td>
<td>0.859</td>
<td>5.59</td>
<td>0.077</td>
<td>3.11</td>
<td>16.807076</td>
<td>5.914234</td>
<td>132.929937</td>
<td>1811485</td>
<td>69.11</td>
<td>50.90</td>
<td>-18.216277</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">62</td>
<td>RIO</td>
<td>Basic Materials</td>
<td>0.617</td>
<td>6.97</td>
<td>0.133</td>
<td>6.59</td>
<td>9.467375</td>
<td>1.832305</td>
<td>99.642450</td>
<td>1206041</td>
<td>75.09</td>
<td>59.35</td>
<td>-9.906014</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">63</td>
<td>LIN</td>
<td>Basic Materials</td>
<td>0.949</td>
<td>1.25</td>
<td>0.009</td>
<td>13.37</td>
<td>33.667915</td>
<td>5.471563</td>
<td>214.337782</td>
<td>1828508</td>
<td>487.49</td>
<td>396.07</td>
<td>9.408891</td>
</tr>
</tbody>
</table>

<p>64 rows × 13 columns</p>
</div>
</div>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/ibm-client-engineering\.github\.io\/solution-007-AI-Financial-Advisor\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<div class="listitem">
<a href="https://ibm.com" rel="noopener noreferrer" class="footerLogo"><img src="https://www.ibm.com/brand/experience-guides/developer/8f4e3cc2b5d52354a6d43c8edba1e3c9/02_8-bar-reverse.svg" alt="IBM Logo" class="footer__logo themedComponent_node_modules-@docusaurus-theme-common-lib-components-ThemedComponent-styles-module themedComponent--light_node_modules-@docusaurus-theme-common-lib-components-ThemedComponent-styles-module" width="250" height="250"></a>
</div>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>